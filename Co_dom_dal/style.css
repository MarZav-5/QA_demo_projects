/* === premenn√© === */
:root {
  --fg: #1a1a1a;
  --muted: #5f6669;
  --err: #b33434;

  --paper-w: clamp(320px, 70vw, 700px);
  --paper-h: clamp(500px, 60vh, 950px);
  --paper-pad: clamp(12px, 2vw, 22px);
  --line: 1.6;
  --paper-y: 0%;
}

/* reset & base */
* {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  color: var(--fg);
  font: 16px/var(--line) "Special Elite", system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: #d9cfb3;
}

/* pozadie ‚Äì default (desktop/tablet) */
.stage {
  position: relative;
  min-height: 100vh;
  background-image: url("./bckgrnd_desktop.png");
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
}

/* papier */
.paper {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, calc(-50% + var(--paper-y)));
  width: var(--paper-w);
  height: var(--paper-h);
  display: grid;
  place-items: center;
}

/* vn√∫tro papiera */
.sheet {
  width: 100%;
  height: 100%;
  padding: var(--paper-pad);
  position: relative;
}

/* vrstvy (screeny) */
.view {
  position: absolute;
  inset: 0;
  padding: clamp(12px, 2vw, 20px);
  overflow: hidden;
  opacity: 1;
  transition: opacity .28s ease;
}

.hidden {
  display: none !important;
}

.paper.switching .view {
  pointer-events: none;
}

/* prep√≠nacie anim√°cie */
@keyframes wipe-in {
  from {
    clip-path: inset(100% 0 0 0);
  }

  to {
    clip-path: inset(0);
  }
}

@keyframes wipe-out {
  from {
    clip-path: inset(0);
  }

  to {
    clip-path: inset(100% 0 0 0);
  }
}

.view--form.wiping-out {
  animation: wipe-out .42s ease forwards;
}

.view--recipe.wiping-in {
  animation: wipe-in .42s .05s ease forwards;
}

/* typografia */
h1,
h2,
h3 {
  margin: .2rem 0 .6rem;
  letter-spacing: .3px;
}

h1 {
  font-size: clamp(28px, 3.8vw, 44px);
}

h2 {
  font-size: clamp(20px, 2.4vw, 28px);
}

h3 {
  font-size: clamp(18px, 2vw, 22px);
  color: var(--muted);
}

#result h2 small {
  font-size: .8em;
  color: #666;
}

.muted {
  color: var(--muted);
}

/* === 1. SCREEN === */
.view--form {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  overflow: hidden;
  padding-top: clamp(28px, 7vh, 72px);
  padding-bottom: 45px;
}

.view--form header {
  text-align: center;
  max-width: 680px;
  margin: 0 auto 1.4rem;
}

/* karta s formul√°rom */
.card {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* grid inputov */
.grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: .6rem;
  width: 320px;
  margin: 0 auto;
}

/* inputy */
input {
  width: 160px;
  margin: 0 auto;
  text-align: center;
  padding: .6rem .2rem .45rem;
  border: none;
  border-bottom: 2px solid #2a2a2a;
  background: transparent;
  color: var(--fg);
  outline: none;
  border-radius: 0;
  box-sizing: border-box;
  font-size: 1rem;
}

input:focus {
  border-bottom-color: #000;
}

input::placeholder {
  color: #7a7a7a;
  opacity: .9;
  text-align: center;
}

/* tlaƒçidlo + status */
.actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-top: 1.2rem;
  gap: .45rem;
  width: 320px;
}

button {
  border: 1px solid #0d0d0d;
  border-radius: 8px;
  padding: .7rem 1.4rem;
  cursor: pointer;
  font-weight: 600;
}

button:active {
  transform: translateY(1px);
}

.primary {
  background: linear-gradient(180deg, #ffe38a, #ffd24a);
  box-shadow: 0 2px 0 #b38a1a, inset 0 1px 0 #fff0b6;
}

.secondary {
  background: linear-gradient(180deg, #e9eef4, #d9e3ee);
  box-shadow: 0 2px 0 #9aa6b2, inset 0 1px 0 #ffffffaa;
}

/* status/error */
.status {
  display: block;
  min-height: 1.3em;
  margin-top: .65rem;
  font-size: .94rem;
  color: var(--muted);
  text-align: center;
}

.bad {
  color: var(--err);
  text-shadow: 0 .35px 0 rgba(179, 52, 52, .25);
  font-size: .92rem;
}

/* === 2. SCREEN ‚Äì recept === */
.view--recipe {

  position: absolute;
  overflow: auto;
  display: block;
  box-sizing: border-box;
  background: transparent;
}

/* Kompaktnej≈°√≠ a centrovan√Ω text receptu */
#result {
  outline: auto;
  max-width: min(58ch, 78%);
  margin: 0 auto;
  margin-top: 4rem;
  padding: 8px 0 16px;
  line-height: 1.4;
  font-size: 0.96rem;
  text-align: center;
}

#result h2 {
  font-size: clamp(18px, 2.2vw, 24px);
  margin: .35rem 0;
  text-decoration: underline;
  text-underline-offset: 6px;
}

#result h3 {
  font-size: clamp(16px, 1.8vw, 20px);
  margin: .3rem 0;
  color: var(--muted);
  text-decoration: underline;
}

/* zoznamy ‚Äì centrovan√© */
#result ul.list,
#result ol.list {
  display: inline-block;
  list-style-position: inside;
  text-align: center;
  padding-left: 0;
  margin: .3rem auto;
}

#result .list li {
  margin: .18rem 0;
  text-align: center;
}

/* tlaƒçidlo pod receptom ‚Äì centrovan√© */
.view--recipe .actions {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100%;
  margin-top: 16px;
  padding-bottom: 10px;
  text-align: center;
}

.view--recipe .actions button {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  margin: 0 auto;
}

/* === Loader (panvica) === */
.loader {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(0deg, rgba(255, 255, 255, .22), rgba(255, 255, 255, .12));
  backdrop-filter: blur(3px);
  z-index: 5;
}

.wok {
  position: relative;
  width: 240px;
  height: 170px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  filter: drop-shadow(0 2px 0 rgba(0, 0, 0, .25));
}

.wok-svg {
  width: 100%;
  height: 100%;
  pointer-events: none;
  transform-origin: 118px 110px;
  animation: wok-tilt 1.2s ease-in-out infinite;
}

@keyframes wok-tilt {
  0% {
    transform: rotate(-7deg);
  }

  50% {
    transform: rotate(6deg);
  }

  100% {
    transform: rotate(-7deg);
  }
}

/* ingrediencie v loaderi */
.chunk {
  position: absolute;
  left: 50%;
  bottom: 48px;
  transform: translateX(-50%);
  opacity: 0;
  animation: chunkFly 1.4s var(--delay, 0s) cubic-bezier(.22, .61, .36, 1) infinite;
}

@keyframes chunkFly {
  0% {
    transform: translate(calc(-50% + 0px), 0) rotate(0);
    opacity: 0;
  }

  10% {
    opacity: 1;
  }

  45% {
    transform: translate(calc(-50% + var(--dx)), -70px) rotate(18deg);
  }

  70% {
    transform: translate(calc(-50% + calc(var(--dx)*.7)), -18px) rotate(-12deg);
  }

  100% {
    transform: translate(calc(-50% + 0px), 0) rotate(0);
    opacity: 0;
  }
}

/* tvary ingredienci√≠ */
.c1 {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: radial-gradient(circle at 50% 50%, #ff7c7c 45%, #c43434 46% 100%);
  border: 2px solid #2a2a2a;
}

.c2 {
  width: 24px;
  height: 10px;
  border-radius: 10px/8px;
  background: #c02626;
  border: 2px solid #2a2a2a;
  transform-origin: right center;
}

.c3 {
  width: 22px;
  height: 16px;
  background: #f0e3c8;
  border: 2px solid #2a2a2a;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
  border-top-left-radius: 14px;
  border-top-right-radius: 14px;
}

.c4 {
  width: 12px;
  height: 12px;
  background: #e67a17;
  border: 2px solid #2a2a2a;
}

.c5 {
  width: 28px;
  height: 10px;
  background: #2f7d3d;
  border: 2px solid #2a2a2a;
  border-radius: 16px;
  transform: rotate(-18deg);
}

.c6 {
  width: 10px;
  height: 10px;
  background: #3f9b3a;
  border: 2px solid #2a2a2a;
  border-radius: 50%;
}
/* ==================================================================== */
/* ======================  üì± RESPONSIVE MEDIA QUERIES  ================= */
/* ==================================================================== */


/* === 1) Telef√≥ny (v≈°eobecne) ‚Äì do 640px ============================== */
@media (max-width: 640px) and (orientation: portrait) {
  :root {
    --paper-w: 94vw;
    --paper-h: clamp(520px, 92vh, 980px);
    --paper-pad: clamp(10px, 3vw, 16px);
  }

  .stage {
    background-image: url("./bckgrnd_mobile.png");
    background-size: cover;
    background-position: center;
  }

  .paper {
    top: 52%;
    transform: translate(-50%, calc(-52% + var(--paper-y)));
  }

  .view--form {
    padding-top: clamp(20px, 8vh, 80px);
    padding-bottom: 56px;
  }

  .view--form .grid,
  .view--form .actions {
    width: min(92vw, 380px);
  }

  .view--form input {
    width: min(80vw, 300px);
    padding: .7rem .3rem .5rem;
    border-bottom-width: 2px;
    font-size: 1rem;
  }

  .view--form .actions button {
    display: inline-flex;
    width: auto;
    min-width: 160px;
    padding: .9rem 1.4rem;
    justify-content: center;
  }

  .status {
    font-size: .95rem;
    margin-top: .7rem;
  }

  #result {
    max-width: min(72ch, 92%);
    padding: 10px 0 24px;
  }

  #result h2 {
    font-size: clamp(18px, 4.5vw, 22px);
  }

  #result ul.list,
  #result ol.list {
    list-style-position: inside;
    padding-left: 0;
  }
}


/* === 2) V√§ƒç≈°ina modern√Ωch mobilov (‚â§480px) =========================== */
@media (max-width: 480px) {
  :root {
    --paper-w: 92vw;
    --paper-h: clamp(480px, 90vh, 880px);
    --paper-pad: clamp(10px, 3vw, 14px);
  }

  .paper {
    outline: auto;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) !important;
  }

  /* voliteƒæne mierne zv√§ƒç≈°i padding vo vn√∫tri pre lep≈°√≠ balans */
  .sheet {
    padding-top: clamp(16px, 3.2vh, 24px);
    padding-bottom: clamp(16px, 3.2vh, 24px);
  }

  /* 1. screen ‚Äì formul√°r */
  .view--form {
    padding-top: clamp(24px, 8vh, 64px);
    padding-bottom: 52px;
  }

  .view--form .grid,
  .view--form .actions {
    width: min(90vw, 340px);
  }

  input {
    width: min(80vw, 180px) !important;
    font-size: 0.95rem;
    padding: .65rem .2rem .45rem;
  }

  .view--form .actions button {
    padding: .8rem 1.2rem;
    font-size: 0.95rem;
  }

  .status {
    font-size: .9rem;
    margin-top: .6rem;
  }

  /* 2. screen ‚Äì recept */
  #result {
    max-width: min(70ch, 85%);
    font-size: 0.94rem;
    padding: 10px 0 20px;
  }

  #result h2 {
    font-size: clamp(18px, 4.5vw, 22px);
  }

  #result h3 {
    font-size: clamp(15px, 4vw, 20px);
  }

  #result ul.list,
  #result ol.list {
    list-style-position: inside;
    padding-left: 0;
  }

  .view--recipe .actions {
    margin-top: 16px;
    padding-bottom: 12px;
  }

  .view--recipe .actions button {
    font-size: 0.95rem;
    padding: .8rem 1.3rem;
  }
}


/* === 3) Veƒæmi √∫zke displeje (star≈°ie mobily ‚â§340px) ================== */
@media (max-width: 340px) {
  .view--form .grid,
  .view--form .actions {
    width: 94vw;
  }

  .view--form input {
    width: 88vw;
  }
}


/* === 4) Tablety a men≈°ie notebooky (641‚Äì1024px) ====================== */
@media (min-width: 641px) and (max-width: 1024px) {
  :root {
    --paper-w: min(92vw, 740px);
    --paper-h: clamp(560px, 88vh, 920px);
    --paper-pad: clamp(10px, 2.4vw, 20px);
  }

  .stage {
    background-image: url("./bckgrnd_desktop.png");
    background-size: cover;
    background-position: center;
  }

  .paper {
    top: 50%;
    transform: translate(-50%, calc(-50% + var(--paper-y)));
  }

  #result {
    max-width: min(68ch, 84%);
  }

  #result h2 {
    font-size: clamp(18px, 4.5vw, 22px);
  }

  #result h3 {
    font-size: clamp(15px, 4vw, 20px);
  }
}


/* === 5) Desktopy (1025‚Äì1599px) ‚Äì tlaƒçidlo v≈ædy viditeƒæn√© ============ */
@media (min-width: 1025px) and (max-width: 1599px) {
  :root {
    --paper-h: clamp(520px, 60vw, 720px);
  }

  #result {
    padding-bottom: 28px;
  }

  .view--recipe .actions {
    margin-top: 20px;
    padding-bottom: 16px;
  }
}


/* === 6) Veƒæk√© monitory (‚â•1600px) ==================================== */
@media (min-width: 1600px) and (orientation: landscape) {
  .stage {
    background-size: 100%;
    background-position: center;
  }

  :root {
    --paper-w: clamp(700px, 60vw, 900px);
    --paper-h: clamp(500px, 50vw, 700px);
  }
}


/* === 7) N√≠zke displeje (napr. mobil v landscape) ==================== */
@media (max-height: 420px) {
  .view--form {
    padding-top: 24px;
    padding-bottom: 40px;
  }

  .view--recipe {
    padding-top: 10px;
  }
}


/* === 8) Univerz√°lne: zalamovanie textu a ochrana layoutu ============ */
.view--form,
.view--form .grid,
.view--form .actions {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* === üîí Z√°mok pozadia pre v≈°etky mobily (iOS + Android) ============= */
@media (max-width: 640px) {
  html, body {
    height: 100%;
    overflow: hidden;              /* zabr√°ni scrollovaniu */
    overscroll-behavior: none;     /* odstr√°ni bounce efekt */
  }

  .stage {
    background: none;              /* vypneme origin√°lne pozadie */
    position: relative;
    z-index: 0;
  }

  .stage::before {
    content: "";
    position: fixed;               /* fixovan√© pozadie */
    inset: 0;
    background: url("./bckgrnd_mobile.png") center / cover no-repeat;
    z-index: -1;                   /* pod v≈°etk√Ωm ostatn√Ωm */
    pointer-events: none;
    transform: translateZ(0);      /* fix pre niektor√© Android GPU glitche */
  }

  .paper {
    position: relative;
    z-index: 1;
  }
}
/* === Fix: vr√°ti≈• papier do stredu na mobiloch ======================= */
@media (max-width: 640px) {
  /* 1) Stage nech sa riadi re√°lnou v√Ω≈°kou displeja (bez adresn√©ho riadku) */
  .stage { min-height: 100dvh; }

  /* 2) Re√°lne centrovanie papiera bez extra offsetu */
  .paper {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* zru≈°√≠me -52% a var(--paper-y) */
  }

  /* 3) Bezpeƒçn√° v√Ω≈°ka papiera pre mobiln√Ω viewport */
  :root {
    --paper-h: clamp(460px, 88dvh, 880px);
  }
}

/* Voliteƒæn√©: veƒæmi n√≠zke displeje (mobil v landscape) */
@media (max-height: 420px) {
  .paper { top: 50%; transform: translate(-50%, -50%); }
  :root { --paper-h: clamp(420px, 86svh, 720px); }
}

/* === MOBIL: fix pozadia + centrovanie papiera + scroll obsahu ====== */
@media (max-width: 640px) {
  /* 0) Zru≈° ‚Äûglob√°lne‚Äú zamknutie scrollu z predch√°dzaj√∫cej verzie */
  html, body {
    height: auto;
    overflow: auto !important;           /* dovoƒæ scrollova≈• obsah */
    overscroll-behavior: none;
  }

  /* 1) Pozadie ako fixn√° vrstva (nepos√∫va sa) */
  .stage {
    min-height: 100svh;                  /* safe viewport v√Ω≈°ka (iOS/Android) */
    background: none;                    /* vypni background na stage */
    position: relative;
    z-index: 0;
  }
  .stage::before {
    content: "";
    position: fixed;                     /* kƒæ√∫ƒçov√© ‚Äì nepohybliv√© pozadie */
    inset: 0;
    background: url("./bckgrnd_mobile.png") center / cover no-repeat;
    z-index: -1;
    pointer-events: none;
    transform: translateZ(0);            /* fix mikrolagu na niektor√Ωch Androidoch */
  }

  /* 2) Centrovanie papiera ‚Äì v≈ædy presne uprostred */
  :root {
    --paper-h: clamp(460px, 88svh, 880px);  /* bezpeƒçn√° v√Ω≈°ka pre mobily */
    --paper-y: 0%;                          /* nulov√Ω offset */
  }
  .paper {
    position: fixed;                      /* NIE absolute ‚Äì ukotv√≠me k viewportu */
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) !important; /* zru≈°√≠me star√© calc(-52% ...) */
    width: min(94vw, 740px);
    height: min(var(--paper-h), 94svh);   /* nikdy nepretiahne viewport */
    z-index: 1;
  }

  /* 3) Scrolluj obsah papiera, nie papier samotn√Ω */
  .sheet {
    height: 100%;
    overflow: auto;
    -webkit-overflow-scrolling: touch;    /* plynul√Ω scroll na iOS/Android */
  }
}
